<header
  [ngClass]="{
    register_header_user: roleValue === 'USER',
    register_header_admin: roleValue === 'ADMIN'
  }"
>
  <div class="register_header_buttons">
    <button mat-raised-button (click)="changeRoleToUser()">
      <mat-icon
        [ngClass]="{
          btn_content_user: roleValue === 'USER',
          btn_content_user2: roleValue === 'ADMIN'
        }"
        >person</mat-icon
      >
      <span
        [ngClass]="{
          btn_content_user: roleValue === 'USER',
          btn_content_user2: roleValue === 'ADMIN'
        }"
        >USUÁRIO</span
      >
    </button>

    <button mat-raised-button id="btn_admin" (click)="changeRoleToAdmin()">
      <mat-icon class="btn_content_admin">person</mat-icon>
      <span class="btn_content_admin">COOPERADOR</span>
    </button>
  </div>

  <a routerLink="/login">
    <mat-icon id="login_icon">login</mat-icon>
  </a>
</header>

<main class="register_main">
  <img
    class="img-fluid"
    src="assets/img/logo4.svg"
    alt="Logo da Medic Exames."
  />

  <div class="register_form_container">
    <div>
      <p>
        Bem-vindo
        {{ roleValue === "USER" ? "novo cliente" : "Colaborador" }}
      </p>
      <h1>
        Cadastro de {{ roleValue === "USER" ? "Paciente" : "Cooperador" }}
      </h1>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="row">
        <div class="col-md-12">
          <mat-form-field class="w-100">
            <mat-label>Nome</mat-label>
            <input matInput formControlName="name" />

            @if (form.controls['name'].hasError('required')) {
            <mat-error>Nome obrigatório.</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col-md-12">
          <mat-form-field class="w-100">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" mask="A*@A*.SSS" />

            @if (form.controls['email'].hasError('required')) {
            <mat-error>E-mail obrigatório.</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col-md-6">
          <mat-form-field class="w-100">
            <mat-label>Senha</mat-label>
            <input matInput formControlName="password" />

            @if (form.controls['password'].hasError('required')) {
            <mat-error>Campo obrigatório.</mat-error>
            } @else if (form.controls['password'].hasError('emptyPassword')) {
            <mat-error>Senha inválida.</mat-error>
            } @else if (form.controls['password'].hasError('minLengthPassword'))
            {
            <mat-error>A senha deve ter pelo menos 5 caracteres.</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col-md-6">
          <mat-form-field class="w-100">
            <mat-label>Confirme sua senha</mat-label>
            <input matInput formControlName="passwordConfirm" />

            @if (form.controls['passwordConfirm'].hasError('required')) {
            <mat-error>Campo obrigatório.</mat-error>
            } @else if (form.errors?.['passwordMatchError']) {
            <mat-error>As senhas não coincidem.</mat-error>
            }
          </mat-form-field>
        </div>

        <div class="col-md-12">
          <mat-form-field class="w-100">
            <mat-label>Tipo de Usuário</mat-label>
            <mat-select formControlName="role">
              <mat-option value="USER">Paciente</mat-option>
              <mat-option value="ADMIN">Cooperador</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <div>
        <button
          [id]="roleValue === 'USER' ? 'form_button' : 'form_button_admin'"
          mat-raised-button
          [disabled]="form.invalid"
        >
          Cadastrar
        </button>
      </div>
    </form>
  </div>
</main>

<footer>
  <small>&copy;Desenvolvido por Equipe 02</small>
</footer>
